{% extends "base.html" %}

{% block title %}Resources - HPE Private Cloud AI{% endblock %}

{% block additional_styles %}
<style>
    /* Any page-specific styles that aren't included in main.css */
</style>
{% endblock %}

{% block content %}
<div class="tab-content" id="mainContent">
    <div class="tab-pane fade show active" id="resources" role="tabpanel" aria-labelledby="resources-tab">
        <div class="d-flex justify-content-between flex-wrap flex-md-nowrap align-items-center pt-3 pb-2 mb-3 border-bottom">
            <h1 class="h2">Kubernetes Resources</h1>
        </div>

        <!-- Tabs -->
        <div class="d-flex justify-content-between align-items-center mb-2">
            <ul class="nav nav-tabs" id="resourceTabs" role="tablist">
                <li class="nav-item" role="presentation">
                    <button class="nav-link active" id="pods-tab" data-bs-toggle="tab" data-bs-target="#pods" type="button" role="tab" aria-controls="pods" aria-selected="true">Pods</button>
                </li>
                <li class="nav-item" role="presentation">
                    <button class="nav-link" id="services-tab" data-bs-toggle="tab" data-bs-target="#services" type="button" role="tab" aria-controls="services" aria-selected="false">Services</button>
                </li>
                <li class="nav-item" role="presentation">
                    <button class="nav-link" id="inferenceservices-tab" data-bs-toggle="tab" data-bs-target="#inferenceservices" type="button" role="tab" aria-controls="inferenceservices" aria-selected="false">InferenceServices</button>
                </li>
                <li class="nav-item" role="presentation">
                    <button class="nav-link" id="deployments-tab" data-bs-toggle="tab" data-bs-target="#deployments" type="button" role="tab" aria-controls="deployments" aria-selected="false">Deployments</button>
                </li>
                <li class="nav-item" role="presentation">
                    <button class="nav-link" id="configmaps-tab" data-bs-toggle="tab" data-bs-target="#configmaps" type="button" role="tab" aria-controls="configmaps" aria-selected="false">ConfigMaps</button>
                </li>
                <li class="nav-item" role="presentation">
                    <button class="nav-link" id="secrets-tab" data-bs-toggle="tab" data-bs-target="#secrets" type="button" role="tab" aria-controls="secrets" aria-selected="false">Secrets</button>
                </li>
            </ul>
            <button class="btn btn-outline-primary btn-sm" onclick="loadAllServiceTypes()">
                <i class="fas fa-cloud-download-alt me-1"></i> Load All Services
            </button>
        </div>

        <!-- Tab content -->
        <div class="tab-content" id="resourceTabsContent">
            <div class="tab-pane fade show active" id="pods" role="tabpanel" aria-labelledby="pods-tab">
                <div class="loading-container" id="podsLoading">
                    <div class="progress-container">
                        <div class="progress">
                            <div class="progress-bar" role="progressbar" style="width: 0%" id="podsProgressBar"></div>
                        </div>
                        <div class="loading-text" id="podsLoadingText">Initializing...</div>
                        <div class="loading-details" id="podsLoadingDetails"></div>
                    </div>
                </div>
                <div class="table-container" id="podsTableContainer" style="opacity: 0; transition: opacity 0.5s ease-in-out;">
                    <div class="table-responsive">
                        <table class="table table-hover table-striped table-sm border-bottom shadow-sm" id="podsTable">
                            <thead class="bg-light">
                                <tr>
                                    <th class="border-0" data-sort="namespace">Namespace</th>
                                    <th class="border-0" data-sort="name">Name</th>
                                    <th class="border-0" data-sort="status">Status</th>
                                    <th class="border-0" data-sort="cpu">vCPU</th>
                                    <th class="border-0" data-sort="gpu">GPU</th>
                                    <th class="border-0" data-sort="memory">Memory</th>
                                    <th class="border-0 text-center">Actions</th>
                                </tr>
                            </thead>
                            <tbody>
                                <!-- Table content will be dynamically populated -->
                            </tbody>
                        </table>
                    </div>
                </div>
            </div>
            <div class="tab-pane fade" id="services" role="tabpanel" aria-labelledby="services-tab">
                <div class="loading-container" id="servicesLoading">
                    <div class="progress-container">
                        <div class="progress">
                            <div class="progress-bar" role="progressbar" style="width: 0%" id="servicesProgressBar"></div>
                        </div>
                        <div class="loading-text" id="servicesLoadingText">Initializing...</div>
                        <div class="loading-details" id="servicesLoadingDetails"></div>
                    </div>
                </div>
                <div class="table-container" id="servicesTableContainer" style="opacity: 0; transition: opacity 0.5s ease-in-out;">
                    <div class="table-responsive">
                        <table class="table table-striped table-sm" id="servicesTable">
                            <thead>
                                <tr>
                                    <th data-sort="namespace">Namespace</th>
                                    <th data-sort="name">Name</th>
                                    <th data-sort="type">Type</th>
                                    <th data-sort="clusterip">Cluster-IP</th>
                                    <th data-sort="externalip">External-IP</th>
                                    <th data-sort="ports">Ports</th>
                                    <th data-sort="age">Age</th>
                                    <th>Actions</th>
                                </tr>
                            </thead>
                            <tbody>
                                <!-- Table content will be dynamically populated -->
                            </tbody>
                        </table>
                    </div>
                </div>
            </div>
            <div class="tab-pane fade" id="inferenceservices" role="tabpanel" aria-labelledby="inferenceservices-tab">
                <div class="loading-container" id="inferenceLoading">
                    <div class="progress-container">
                        <div class="progress">
                            <div class="progress-bar" role="progressbar" style="width: 0%" id="inferenceProgressBar"></div>
                        </div>
                        <div class="loading-text" id="inferenceLoadingText">Initializing...</div>
                        <div class="loading-details" id="inferenceLoadingDetails"></div>
                    </div>
                </div>
                <div class="table-container" id="inferenceservicesTableContainer" style="opacity: 0; transition: opacity 0.5s ease-in-out;">
                    <div class="table-responsive">
                        <table class="table table-striped table-sm" id="inferenceservicesTable">
                            <thead>
                                <tr>
                                    <th data-sort="namespace">Namespace</th>
                                    <th data-sort="name">Name</th>
                                    <th data-sort="url">URL</th>
                                    <th data-sort="status">Status</th>
                                    <th data-sort="cpu">vCPU</th>
                                    <th data-sort="gpu">GPU</th>
                                    <th data-sort="memory">Memory</th>
                                    <th data-sort="traffic1">Traffic %</th>
                                    <th data-sort="traffic2">Canary %</th>
                                    <th data-sort="age">Age</th>
                                    <th>Actions</th>
                                </tr>
                            </thead>
                            <tbody>
                                <!-- Table content will be dynamically populated -->
                            </tbody>
                        </table>
                    </div>
                </div>
            </div>
            <div class="tab-pane fade" id="deployments" role="tabpanel" aria-labelledby="deployments-tab">
                <div class="loading-container" id="deploymentsLoading">
                    <div class="progress-container">
                        <div class="progress">
                            <div class="progress-bar" role="progressbar" style="width: 0%" id="deploymentsProgressBar"></div>
                        </div>
                        <div class="loading-text" id="deploymentsLoadingText">Initializing...</div>
                        <div class="loading-details" id="deploymentsLoadingDetails"></div>
                    </div>
                </div>
                <div class="table-container" id="deploymentsTableContainer" style="opacity: 0; transition: opacity 0.5s ease-in-out;">
                    <div class="table-responsive">
                        <table class="table table-striped table-sm" id="deploymentsTable">
                            <thead>
                                <tr>
                                    <th data-sort="namespace">Namespace</th>
                                    <th data-sort="name">Name</th>
                                    <th data-sort="ready">Ready</th>
                                    <th data-sort="status">Status</th>
                                    <th data-sort="cpu">CPU</th>
                                    <th data-sort="memory">Memory</th>
                                    <th>Actions</th>
                                </tr>
                            </thead>
                            <tbody>
                                <!-- Table content will be dynamically populated -->
                            </tbody>
                        </table>
                    </div>
                </div>
            </div>
            <div class="tab-pane fade" id="configmaps" role="tabpanel" aria-labelledby="configmaps-tab">
                <div class="loading-container" id="configmapsLoading">
                    <div class="progress-container">
                        <div class="progress">
                            <div class="progress-bar" role="progressbar" style="width: 0%" id="configmapsProgressBar"></div>
                        </div>
                        <div class="loading-text" id="configmapsLoadingText">Initializing...</div>
                        <div class="loading-details" id="configmapsLoadingDetails"></div>
                    </div>
                </div>
                <div class="table-container" id="configmapsTableContainer" style="opacity: 0; transition: opacity 0.5s ease-in-out;">
                    <div class="table-responsive">
                        <table class="table table-striped table-sm" id="configmapsTable">
                            <thead>
                                <tr>
                                    <th>Namespace</th>
                                    <th>Name</th>
                                    <th>Data</th>
                                    <th>Actions</th>
                                </tr>
                            </thead>
                            <tbody>
                                <!-- Table content will be dynamically populated -->
                            </tbody>
                        </table>
                    </div>
                </div>
            </div>
            <div class="tab-pane fade" id="secrets" role="tabpanel" aria-labelledby="secrets-tab">
                <div class="loading-container" id="secretsLoading">
                    <div class="progress-container">
                        <div class="progress">
                            <div class="progress-bar" role="progressbar" style="width: 0%" id="secretsProgressBar"></div>
                        </div>
                        <div class="loading-text" id="secretsLoadingText">Initializing...</div>
                        <div class="loading-details" id="secretsLoadingDetails"></div>
                    </div>
                </div>
                <div class="table-container" id="secretsTableContainer" style="opacity: 0; transition: opacity 0.5s ease-in-out;">
                    <div class="table-responsive">
                        <table class="table table-striped table-sm" id="secretsTable">
                            <thead>
                                <tr>
                                    <th>Namespace</th>
                                    <th>Name</th>
                                    <th>Type</th>
                                    <th>Data</th>
                                    <th>Actions</th>
                                </tr>
                            </thead>
                            <tbody>
                                <!-- Table content will be dynamically populated -->
                            </tbody>
                        </table>
                    </div>
                </div>
            </div>
        </div>
    </div>
</div>
{% endblock %}

{% block page_scripts %}
<script src="{{ url_for('static', filename='js/index.js') }}"></script>
<script>
document.addEventListener('DOMContentLoaded', function() {
    // Setup tab click handlers
    setupTabClickHandlers();
    
    // Load default tab (pods)
    const podsTab = document.getElementById('pods-tab');
    if (podsTab) {
        podsTab.click();
    }
    
    // Initialize GPU filter if applicable
    if (typeof initializeGPUFilter === 'function') {
        initializeGPUFilter();
    }
});
</script>
{% endblock %} 